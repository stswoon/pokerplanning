import{d as u,_ as m,o as t,c as r,a as s,n as y,f as V,p as g,g as S,t as b,b as A,F as _,h as p,i as C,j as c,e as $,r as U}from"./index.e3a48353.js";import{r as f,u as k}from"./room.service.0fddc71d.js";const D=u({props:["cardShirt","rotateAngle","value","displayText","nonVisible","showAnimation","flipCardAnimation"],data:function(){return{showAnimationState:this.showAnimation}},watch:{value:function(e,a){if(e!=a){const n=this.showAnimationState==="UP"?"_run-transformation-up":"_run-transformation-down",i=this.$el;i.classList.remove(n),i.offsetWidth,i.classList.add(n)}}},mounted(){console.debug("mount")}});const T=e=>(g("data-v-424f4fb8"),e=e(),S(),e),F={class:"flip-card-inner"},L=T(()=>s("div",{class:"flip-card-back"},[s("img")],-1)),R={class:"flip-card-front"},P=["innerHTML"],W=T(()=>s("p",null,"\xBD",-1));function O(e,a,n,i,h,v){return t(),r("div",{class:y(["card-container",{"_run-transformation-up":this.showAnimationState==="UP","_run-transformation-down":this.showAnimationState==="DOWN","_run-flip-animation":e.flipCardAnimation}])},[s("div",{class:y(["flip-card card",{"_non-visible":e.nonVisible,"flip-card-show":e.cardShirt}]),style:V({transform:`rotate(${e.rotateAngle}deg)`})},[s("div",F,[L,s("div",R,[s("span",{innerHTML:e.displayText},null,8,P),W])])],6)],2)}const N=m(D,[["render",O],["__scopeId","data-v-424f4fb8"]]),j=u({props:["userName","display","displayName","order"]});const z={key:0},E={key:1};function H(e,a,n,i,h,v){return t(),r("div",{class:y(["user-container",{"user-in-line":e.display==="line"}])},[e.displayName==="up"?(t(),r("div",z,b(e.userName),1)):A("",!0),s("div",{class:"user",style:V({"background-image":`icons/u${e.order}.png`})},null,4),e.displayName==="down"||e.display==="line"?(t(),r("div",E,b(e.userName),1)):A("",!0)],2)}const B=m(j,[["render",H],["__scopeId","data-v-79abff26"]]),M=u({components:{User:B},emits:["clearCards","flipCards"],props:{votes:{type:Array,default:[]},showCards:{type:Boolean,default:!1}},methods:{cardValueDisplay:function(e){return this.showCards?e.cardValue||"no card":e.cardValue?"??":"waiting"}},computed:{average:function(){const e=this.votes.filter(n=>typeof n.cardValue=="number");let a=e.reduce((n,i)=>n+i.cardValue,0);return a=a/e.length,a}}});const Q=e=>(g("data-v-a1169fb4"),e=e(),S(),e),q={class:"scoreboard"},G={class:"scoreboard__user-line"},J=Q(()=>s("span",null,":\xA0",-1));function K(e,a,n,i,h,v){const l=c("User");return t(),r("div",q,[s("button",{onClick:a[0]||(a[0]=d=>this.$emit("clearCards"))},"Clear cards"),s("button",{onClick:a[1]||(a[1]=d=>this.$emit("flipCards"))},"Flip cards"),s("div",null,"Average: "+b(e.showCards?e.average:"??"),1),s("div",null,[(t(!0),r(_,null,p(e.votes,(d,o)=>(t(),r("div",G,[s("span",null,[C(l,{"user-name":d.userName,display:"line",order:o},null,8,["user-name","order"])]),J,s("span",null,b(e.cardValueDisplay(d)),1)]))),256))])])}const X=m(M,[["render",K],["__scopeId","data-v-a1169fb4"]]),Y=u({components:{Card:N,User:B},props:{votes:{type:Array,default:[]},showCards:{type:Boolean,default:!1}},data(){return{}},computed:{voteUp:function(){return this.votes.filter((a,n)=>n%2===0)},voteDown:function(){return this.votes.filter((a,n)=>n%2!==0)}}});const I=e=>(g("data-v-34ba4df5"),e=e(),S(),e),Z={class:"table-container"},x={class:"table-bench",id:"bench-up"},ee={class:"table"},se=I(()=>s("div",{class:"table__left"},null,-1)),ae={class:"table__middle"},te={class:"table__middle-up"},oe={class:"table__middle-down"},ne=I(()=>s("div",{class:"table__right"},null,-1)),re={class:"table-bench",id:"bench-down"};function de(e,a,n,i,h,v){const l=c("User"),d=c("Card");return t(),r("div",Z,[s("div",x,[(t(!0),r(_,null,p(e.voteUp,o=>(t(),$(l,{userName:o.userName,"display-name":"up"},null,8,["userName"]))),256))]),s("div",ee,[se,s("div",ae,[s("div",te,[(t(!0),r(_,null,p(e.voteUp,o=>(t(),$(d,{value:o.cardValue,"display-text":o.cardValue,rotateAngle:o.rotateAngle,cardShirt:!e.showCards,"non-visible":o.cardValue==null,"show-animation":"DOWN"},null,8,["value","display-text","rotateAngle","cardShirt","non-visible"]))),256))]),s("div",oe,[(t(!0),r(_,null,p(e.voteDown,o=>(t(),$(d,{value:o.cardValue,"display-text":o.cardValue,rotateAngle:o.rotateAngle,cardShirt:!e.showCards,"non-visible":o.cardValue==null,"show-animation":"UP"},null,8,["value","display-text","rotateAngle","cardShirt","non-visible"]))),256))])]),ne]),s("div",re,[(t(!0),r(_,null,p(e.voteDown,o=>(t(),$(l,{userName:o.userName,"display-name":"down"},null,8,["userName"]))),256))])])}const ie=m(Y,[["render",de],["__scopeId","data-v-34ba4df5"]]);let w=[0,{value:.5,displayText:"&half;"},1,2,3,4,5,6,7,8,9,10,12,15,30,"?"];w=w.map(e=>e.value?e:{value:e,displayText:e,cardShirt:!0});const le=u({components:{Card:N},emits:["throwCard"],data(){return{avCards:w}},mounted(){this.avCards.forEach((e,a)=>{setTimeout(()=>e.cardShirt=!1,1e3+a*100)})}});const ce={class:"card-board"},ue=["onClick"];function _e(e,a,n,i,h,v){const l=c("Card");return t(),r("div",ce,[(t(!0),r(_,null,p(e.avCards,d=>(t(),r("button",{class:"card",onClick:o=>this.$emit("throwCard",d.value)},[C(l,{value:d.value,displayText:d.displayText,"card-shirt":d.cardShirt},null,8,["value","displayText","card-shirt"])],8,ue))),256))])}const pe=m(le,[["render",_e],["__scopeId","data-v-d22d1dd5"]]),me=u({components:{CardBoard:pe,Table:ie,ScoreBoard:X,Card:N},data(){return{votes:[],showCards:!1}},methods:{throwCard:function(e){f.throwCard(e)},clearCards:function(){f.clearCards()},flipCards:function(){f.flipCards()}},mounted(){if(f.getUserName())f.attachWsToRoom(a=>{this.votes=Object.values(a.votes),this.showCards=a.showCards});else{const a=k.getQueryParameter("roomId");U.push(`/?redirectRoomId=${a}`)}}});const he={class:"room-container"},ve={class:"room-container__table"},fe={class:"room-container__card-board"},$e={class:"room-container__score-board"};function Ce(e,a,n,i,h,v){const l=c("Table"),d=c("CardBoard"),o=c("ScoreBoard");return t(),r("div",he,[s("div",ve,[C(l,{votes:e.votes,"show-cards":e.showCards},null,8,["votes","show-cards"])]),s("div",fe,[C(d,{onThrowCard:e.throwCard},null,8,["onThrowCard"])]),s("div",$e,[C(o,{votes:e.votes,"show-cards":e.showCards,onClearCards:e.clearCards,onFlipCards:e.flipCards},null,8,["votes","show-cards","onClearCards","onFlipCards"])])])}const be=m(me,[["render",Ce],["__scopeId","data-v-d4a129e6"]]),ge=u({__name:"RoomView",setup(e){return(a,n)=>(t(),$(be))}});export{ge as default};
//# sourceMappingURL=RoomView.17d03bda.js.map
