import{d as u,_ as m,o as a,c as r,a as t,t as y,n as b,f as N,b as S,F as _,g as p,h as $,i as c,p as A,j as V,e as C,r as I}from"./index.f02826c6.js";import{r as f,u as U}from"./room.service.0fddc71d.js";const k=u({props:["cardShirt","rotateAngle","value","displayText","nonVisible","showAnimation","flipCardAnimation"],data:function(){return{showAnimationState:this.showAnimation}},watch:{value:function(e,s){if(e!=s){const n=this.showAnimationState==="UP"?"_run-transformation-up":"_run-transformation-down",i=this.$el;i.classList.remove(n),i.offsetWidth,i.classList.add(n)}}},mounted(){console.debug("mount")}});function D(e,s,n,i,h,v){return a(),r("div",{class:b(["card-container",{"_run-transformation-up":this.showAnimationState==="UP","_run-transformation-down":this.showAnimationState==="DOWN","_run-flip-animation":e.flipCardAnimation}])},[t("div",{class:b(["card",{"_card-shirt":e.cardShirt,"_non-visible":e.nonVisible}]),style:N({transform:`rotate(${e.rotateAngle}deg)`})},[t("span",null,y(e.cardShirt?"":e.displayText),1)],6)],2)}const g=m(k,[["render",D],["__scopeId","data-v-5569dcdc"]]),F=u({props:["userName","display","displayName","order"]});const R={key:0},P={key:1};function W(e,s,n,i,h,v){return a(),r("div",{class:b(["user-container",{"user-in-line":e.display==="line"}])},[e.displayName==="up"?(a(),r("div",R,y(e.userName),1)):S("",!0),t("div",{class:"user",style:N({"background-image":`icons/u${e.order}.png`})},null,4),e.displayName==="down"||e.display==="line"?(a(),r("div",P,y(e.userName),1)):S("",!0)],2)}const B=m(F,[["render",W],["__scopeId","data-v-79abff26"]]),L=u({components:{User:B},emits:["clearCards","flipCards"],props:{votes:{type:Array,default:[]},showCards:{type:Boolean,default:!1}},methods:{cardValueDisplay:function(e){return this.showCards?e.cardValue||"no card":e.cardValue?"??":"waiting"}},computed:{average:function(){const e=this.votes.filter(n=>typeof n.cardValue=="number");let s=e.reduce((n,i)=>n+i.cardValue,0);return s=s/e.length,s}}});const O=e=>(A("data-v-a1169fb4"),e=e(),V(),e),j={class:"scoreboard"},z={class:"scoreboard__user-line"},E=O(()=>t("span",null,":\xA0",-1));function Q(e,s,n,i,h,v){const l=c("User");return a(),r("div",j,[t("button",{onClick:s[0]||(s[0]=d=>this.$emit("clearCards"))},"Clear cards"),t("button",{onClick:s[1]||(s[1]=d=>this.$emit("flipCards"))},"Flip cards"),t("div",null,"Average: "+y(e.showCards?e.average:"??"),1),t("div",null,[(a(!0),r(_,null,p(e.votes,(d,o)=>(a(),r("div",z,[t("span",null,[$(l,{"user-name":d.userName,display:"line",order:o},null,8,["user-name","order"])]),E,t("span",null,y(e.cardValueDisplay(d)),1)]))),256))])])}const q=m(L,[["render",Q],["__scopeId","data-v-a1169fb4"]]),G=u({components:{Card:g,User:B},props:{votes:{type:Array,default:[]},showCards:{type:Boolean,default:!1}},data(){return{}},computed:{voteUp:function(){return this.votes.filter((s,n)=>n%2===0)},voteDown:function(){return this.votes.filter((s,n)=>n%2!==0)}}});const T=e=>(A("data-v-34ba4df5"),e=e(),V(),e),H={class:"table-container"},J={class:"table-bench",id:"bench-up"},K={class:"table"},M=T(()=>t("div",{class:"table__left"},null,-1)),X={class:"table__middle"},Y={class:"table__middle-up"},Z={class:"table__middle-down"},x=T(()=>t("div",{class:"table__right"},null,-1)),ee={class:"table-bench",id:"bench-down"};function se(e,s,n,i,h,v){const l=c("User"),d=c("Card");return a(),r("div",H,[t("div",J,[(a(!0),r(_,null,p(e.voteUp,o=>(a(),C(l,{userName:o.userName,"display-name":"up"},null,8,["userName"]))),256))]),t("div",K,[M,t("div",X,[t("div",Y,[(a(!0),r(_,null,p(e.voteUp,o=>(a(),C(d,{value:o.cardValue,"display-text":o.cardValue,rotateAngle:o.rotateAngle,cardShirt:!e.showCards,"non-visible":o.cardValue==null,"show-animation":"DOWN"},null,8,["value","display-text","rotateAngle","cardShirt","non-visible"]))),256))]),t("div",Z,[(a(!0),r(_,null,p(e.voteDown,o=>(a(),C(d,{value:o.cardValue,"display-text":o.cardValue,rotateAngle:o.rotateAngle,cardShirt:!e.showCards,"non-visible":o.cardValue==null,"show-animation":"UP"},null,8,["value","display-text","rotateAngle","cardShirt","non-visible"]))),256))])]),x]),t("div",ee,[(a(!0),r(_,null,p(e.voteDown,o=>(a(),C(l,{userName:o.userName,"display-name":"down"},null,8,["userName"]))),256))])])}const ae=m(G,[["render",se],["__scopeId","data-v-34ba4df5"]]);let w=[0,{value:.5,displayText:"1/2"},1,2,3,4,5,6,7,8,9,10,12,15,30,"?"];w=w.map(e=>e.value?e:{value:e,displayText:e});const te=u({components:{Card:g},emits:["throwCard"],data(){return{avCards:w}}});const oe={class:"card-board"},ne=["onClick"];function re(e,s,n,i,h,v){const l=c("Card");return a(),r("div",oe,[(a(!0),r(_,null,p(e.avCards,d=>(a(),r("button",{class:"card",onClick:o=>this.$emit("throwCard",d.value)},[$(l,{value:d.value,displayText:d.displayText},null,8,["value","displayText"])],8,ne))),256))])}const de=m(te,[["render",re],["__scopeId","data-v-a6290f6f"]]),ie=u({components:{CardBoard:de,Table:ae,ScoreBoard:q,Card:g},data(){return{votes:[],showCards:!1}},methods:{throwCard:function(e){f.throwCard(e)},clearCards:function(){f.clearCards()},flipCards:function(){f.flipCards()}},mounted(){if(f.getUserName())f.attachWsToRoom(s=>{this.votes=Object.values(s.votes),this.showCards=s.showCards});else{const s=U.getQueryParameter("roomId");I.push(`/?redirectRoomId=${s}`)}}});const le={class:"room-container"},ce={class:"room-container__table"},ue={class:"room-container__card-board"},_e={class:"room-container__score-board"};function pe(e,s,n,i,h,v){const l=c("Table"),d=c("CardBoard"),o=c("ScoreBoard");return a(),r("div",le,[t("div",ce,[$(l,{votes:e.votes,"show-cards":e.showCards},null,8,["votes","show-cards"])]),t("div",ue,[$(d,{onThrowCard:e.throwCard},null,8,["onThrowCard"])]),t("div",_e,[$(o,{votes:e.votes,"show-cards":e.showCards,onClearCards:e.clearCards,onFlipCards:e.flipCards},null,8,["votes","show-cards","onClearCards","onFlipCards"])])])}const me=m(ie,[["render",pe],["__scopeId","data-v-2a0d71d6"]]),fe=u({__name:"RoomView",setup(e){return(s,n)=>(a(),C(me))}});export{fe as default};
//# sourceMappingURL=RoomView.97cbbb55.js.map
